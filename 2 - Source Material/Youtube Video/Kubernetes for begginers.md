2026-02-06 21:32

Source: https://www.youtube.com/watch?v=s_o8dwzRlu4
# Kubernetes for begginers

Kubernetes was developed by google to orchestrate multiple applications with container technologies.

## Architecture
- Cluster: The main host, virtual or physical.
- Worker nodes (nodes): Each node contains containers of diferent applications running inside of it, also each node has a kubelet agent running in it.
- Kubelet agent: The component which makes possible the cluster manage the nodes.
- Master node: K8s important proccesses and tools to manage the entire cluster, each of them is a independent container inside the master node.
	- Api server: Provides a http interface to manage the cluster.
	- Controller Manager: Manage and orchestrate the entire state of the cluster. Also is who knows then a container dies and need to be restarted.
	- Scheduler: Manages where a pod need to be created based on the node resources.
	- etcd: A key value database which store snapshots of the entire cluster, event the container inside the pods, can used to restore the cluster to a previous state.
## Main components
- Pod: Smallest unit of kubernetes. It's a abstraction layer over a container, that way kubernetes can be agnostic to containers. The pod is a runtime environment to the container. OBS: Usually is used 1 application per Pod.
	- Each pod contains their own IP address. This IP is self contained inside the node.
	- Pods are ephemeral: Means they can die at anytime and be replaced by another pod.
- Service: Since each pod has an IP address and are ephemeral, every time a Pod dies the new pod receive a new IP. To manage this services are used. A service is attached to a pod, so the service become a layer above the pod. Their lifecyles are not connected (The service stays the same if the pod dies.)
	- A service can be internal (the default option) on the node, or external. But, when a service is used as external interface, it exposes only the base protocol (Ex: http), the service IP address and the port.
	- Also works as a load balancer.
- Ingress: To manage SSL, domain name, etc... we use ingress, they are a layer above a service, they receive the request and pass it to the binded service.
- ConfigMap: A external configuration component, the configs inside the map are used by the pods. Useful stuff to put in there are database username or host. For non-confidential data only.
- Secrets: Used to store secret data. By default the secrets are only base64 encoded, but encryption can be added with third party tools.
- Volumes: K8s can bind volumes from different sources, a storage in the same cluster machine, or a remote source.
- Deployment: Serves as blueprints for pods. Are a layer above pods, in them we specify the amount of replicas for the pods, generally we create deployments, not manage pods directly.
	- For things that are stateless.
- StatefulSet: Is specific for applications which have a state, like a database, where if you have 2 databases managing the same storage at the same time, this probably will leave some inconsistency, race condition.
	- Deploy and manage a StatefulSet is more harder than a deployment, so is normal have the database hosted outside of the kubernetes cluster.
## Configuration
Kubernetes has configuration files for each component.
The configuration files have 3 parts.
- metadata: Has infos like the ApiVersion and the kind of component (Deployment, Service, etc...)
- specification: Config attributes specific for each component.
- status: This is generated by the k8s itself, used by the Controller Manager to guarantee that the current state is the configured/desired state of the components.
	- The desired state and the current state are stored by the etcd, the component responsible for the cluster snapshots.
	- Part of the self-healing feature.
## Minikube
A lighter alternative to k8s for localhost, instead master node + worker nodes, minikube has one node with master and workers processes plus a docker runtime.
## Kubectl
The CLI for k8s management. It communicates with the cluster through the API server master process.
